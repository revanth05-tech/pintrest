<%- include('partials/header') %>

<div class="profile w-full min-h-screen bg-white text-zinc-800 flex flex-col pt-1">
  <form id="uploadForm" hidden action="/fileupload" method="POST" enctype="multipart/form-data">
    <input id="fileInput" type="file" name="image" accept="image/*">
  </form>

  <!-- Profile Section -->
  <div class="profdets flex flex-col items-center gap-2 mt-8 sm:mt-12 md:mt-20 px-4 sm:px-0">
    <div class="relative w-20 h-20 sm:w-24 sm:h-24 md:w-32 md:h-32 rounded-full overflow-hidden">
      <img 
        class="w-full h-full object-cover rounded-full" 
        src="/images/uploads/<%= user.profileImage %>" 
        alt="Profile Image"
      >
      <span id="uploadIcon" class="absolute bottom-0 right-0 flex items-center justify-center 
                   w-7 h-7 sm:w-8 sm:h-8 bg-gray-200 rounded-full text-black text-lg 
                   border border-white shadow-md z-10 cursor-pointer">
        <i class="ri-pencil-line"></i>
      </span>
    </div>

    <h1 class="text-2xl sm:text-3xl font-semibold"><%= user.name %></h1>
    <h3 class="text-sm md:text-md"><%= user.username %></h3>

    <a href="/edit" 
       class="px-4 sm:px-7 py-2 bg-zinc-700 rounded-full text-xs font-semibold transition-colors hover:bg-zinc-600 focus:outline-none focus:ring">
       Edit
    </a>

    <a href="/add" class="px-6 sm:px-10 py-2 rounded-lg bg-red-700 text-xs font-semibold hover:bg-red-600 transition-colors">
      Add New Post
    </a>
  </div>

  <!-- Cards Section -->
  <div class="cards flex flex-col sm:flex-row sm:flex-wrap justify-center gap-6 px-4 sm:px-6 lg:px-10 mt-8">

    <!-- Uploaded Pins -->
    <div class="card w-full sm:w-80 bg-white rounded-xl shadow-md p-4">
      <a href="/show/posts" class="text-lg sm:text-xl font-semibold mb-3">Your Uploaded Pins</a>
      <h5 class="text-sm font-medium opacity-80 mb-4"><%= user.posts.length %> Pins</h5>
      
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
        <% user.posts.forEach(function(post) { %>
          <div class="w-full h-28 sm:h-32 bg-zinc-200 rounded-lg overflow-hidden">
            <img 
              class="w-full h-full object-cover" 
              src="/images/uploads/<%= post.image %>" 
              alt="Post"
            >
          </div>
        <% }) %>
      </div>
    </div>

    <!-- Favorites -->
    <div class="card w-full sm:w-64 bg-white rounded-xl shadow-md p-4">
      <h3 class="text-lg sm:text-xl font-semibold mb-3">Favorites</h3>
      <h5 class="text-sm font-medium opacity-80 mb-4">12 Pins</h5>
      <div class="w-full h-32 bg-zinc-200 rounded-lg overflow-hidden">
        <img class="w-full h-full object-cover" 
             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTSzmTf2zzXGsmY1EQpP1ci_Yn1zDU3kD1ufQ&s" 
             alt="Favorites">
      </div>
    </div>

    <!-- Memories -->
    <div class="card w-full sm:w-64 bg-white rounded-xl shadow-md p-4">
      <h3 class="text-lg sm:text-xl font-semibold mb-3">Memories</h3>
      <h5 class="text-sm font-medium opacity-80 mb-4">8 Pins</h5>
      <div class="w-full h-32 bg-zinc-200 rounded-lg overflow-hidden">
        <img class="w-full h-full object-cover" 
             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdQkE46eqWk-6FoMnv0xQApddZKQAkL3iJxg&s" 
             alt="Memories">
      </div>
    </div>

  </div>
</div>

<script>
  const uploadIcon = document.getElementById('uploadIcon');
  const fileInput = document.getElementById('fileInput');
  const uploadForm = document.getElementById('uploadForm');

  uploadIcon.addEventListener('click', () => fileInput.click());
  fileInput.addEventListener('change', () => uploadForm.submit());
</script>

<%- include('partials/footer') %>
