<%- include('partials/header') %>
<div class="w-full min-h-full bg-zinc-600 px-10 py-10 text-white">
    <div class="cards flex flex-wrap gap-10">
        <% if (user.posts && user.posts.length > 0) { %>
            <% user.posts.forEach(function(post) { %>
                <div>
                    <div class="card w-32 h-40 bg-sky-200 rounded-lg relative">
                        <img class="w-full h-full object-cover rounded-lg" 
                             src="/images/uploads/<%= post.image %>" 
                             alt="Post">

                        <!-- Delete button -->
                        <form action="/delete/<%= post._id %>" method="POST" 
                              onsubmit="return confirmDelete()" 
                              class="absolute top-1 right-1">
                            <button type="submit" 
                                    class="bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-400">
                                X
                            </button>
                        </form>
                    </div>
                    <h3 class="text-center mt-2 font-medium"><%= post.title %></h3>
                </div>
            <% }) %>
        <% } else { %>
            <p class="text-center w-full">No uploads yet. Start posting your images!</p>
        <% } %>
    </div>
</div>

<script>
  function confirmDelete() {
    return confirm("⚠️ Are you sure you want to delete this post?");
  }
</script>

<%- include('partials/footer') %>
